social_capital_college <- read.csv("~/Yale Fall 2022/Introduction to Econometrics/econ117_pset2_folder/social_capital_college.csv")
View(social_capital_college)
dim(social_capital_college)
subset("Yale University")
social_capital_college <- soccapcol
soccapcol
social_capital_college <- "soccapcol"
soccapcol
data_new
social_capital_college <- read.csv("~/Yale Fall 2022/Introduction to Econometrics/econ117_pset2_folder/social_capital_college.csv")
View(social_capital_college)
data_new <- subset(social_capital_college, social_capital_college$college_name == "Yale University")
data_neew
data_new
yale_data <- subset(social_capital_college, social_capital_college$college_name == "Yale University")
View(data_new)
View(yale_data)
# Econ 117 Pset  2
# Part 2 Question 2
# Rachel Bitutsky
read.csv("~/Yale Fall 2022/Introduction to Econometrics/econ117_pset2_folder/social_capital_college.csv")
# 2d)
dim(social_capital_college)
# Econ 117 Pset  2
# Part 2 Question 2
# Rachel Bitutsky
read.csv("~/Yale Fall 2022/Introduction to Econometrics/econ117_pset2_folder/social_capital_college.csv")
# 2d)
dim(social_capital_college)
yale_data <- subset(social_capital_college, social_capital_college$college_name == "Yale University")
yale_data
view(yale_data)
yale_data
read.csv("~/Yale Fall 2022/Introduction to Econometrics/econ117_pset2_folder/social_capital_college.csv")
orange_county <- (social_capital_college, social_capital_college$county, county == 06059)
orange_county <- (social_capital_college, social_capital_college$county == 06059)
orange_county <- (social_capital_college, social_capital_college$county == 06059)
orange_county <- (social_capital_college$social_capital_college == 06059)
read.csv("~/Yale Fall 2022/Introduction to Econometrics/econ117_pset2_folder/social_capital_college.csv")
social_capital_college <- read.csv("~/Yale Fall 2022/Introduction to Econometrics/econ117_pset2_folder/social_capital_college.csv")
View(social_capital_college)
yale_data <- subset(social_capital_college, social_capital_college$college_name == "Yale University")
orange_county <- (social_capital_college$social_capital_college == 06059)
prob_orange_county <- mean(social_capital_college$county == 06059)
orange_counties <- social_capital_college$county = 06059
orange_counties <- (social_capital_college$county = 06059)
orange_counties
view(orange_counties)
orange_counties
orange_counties <- subset(social_capital_college, county == 1)
orange_counties <- subset(social_capital_college, county == 06059)
source("~/Yale Fall 2022/Introduction to Econometrics/econ117_pset2_folder/econ117_pset2_rbitutsky.R")
social_capital_college <- read.csv("~/Yale Fall 2022/Introduction to Econometrics/econ117_pset2_folder/social_capital_college.csv")
View(social_capital_college)
view(yale_data)
View(yale_data)
x <- seq(1, 5, 1)
x
seq(1, 6, 1)
seq(2, 5, 1)
seq(1, 5, 2)
seq(5,10,2)
pnorm(1.1)
qnorm(1.1)
qnorm(0.5)
pnorm(-3.6)
qnorm(0.0002)
Sample2_Data <- read.csv("~/Yale Fall 2022/Introduction to Econometrics/econ117_pset3_folder/Sample2_Data.csv")
View(Sample2_Data)
Sample2_Data <- df
df <- Sample2_Data
Sample2_Data <- read.csv("~/Yale Fall 2022/Introduction to Econometrics/econ117_pset3_folder/Sample2_Data.csv")
View(Sample2_Data)
df <- Sample2_Data
nrow(df[df$treatment == treated, ])
nrow(df[df$treatment == "treate", ])
nrow(df[df$treatment == "treated", ])
installr::updateR()
installr::updateR()
install.packages("installr")
installr::updateR()
installr::updateR()
installr::updateR()
library(tidyverse)
library(haven)
library(Synth)
library(devtools)
update.packages()
library(tidyverse)
library(haven)
library(Synth)
library(devtools)
read_data <- function(df)
{
full_path <- paste("https://github.com/scunning1975/mixtape/raw/master/",
df, sep = "")
df <- read_dta(full_path)
return(df)
}
dataprep_out <- dataprep(
foo = texas,
predictors = c("poverty", "income"),
predictors.op = "mean",
time.predictors.prior = 1985:1993,
special.predictors = list(
list("bmprison", c(1988, 1990:1992), "mean"),
list("alcohol", 1990, "mean"),
list("aidscapita", 1990:1991, "mean"),
list("black", 1990:1992, "mean"),
list("perc1519", 1990, "mean")),
dependent = "bmprison",
unit.variable = "statefip",
unit.names.variable = "state",
time.variable = "year",
treatment.identifier = 48,
controls.identifier = c(1,2,4:6,8:13,15:42,44:47,49:51,53:56),
time.optimize.ssr = 1985:1993,
time.plot = 1985:2000
)
setwd("G:/.shortcut-targets-by-id/1rdr5l5G0qIwemvG4qzNBH4KvxTHwoEBJ/REDD_specification_curve/code/agrocortex")
read_data <- function(df)
{
full_path <- paste("https://github.com/scunning1975/mixtape/raw/master/",
df, sep = "")
df <- read_dta(full_path)
return(df)
}
dataprep_out <- dataprep(
foo = texas,
predictors = c("poverty", "income"),
predictors.op = "mean",
time.predictors.prior = 1985:1993,
special.predictors = list(
list("bmprison", c(1988, 1990:1992), "mean"),
list("alcohol", 1990, "mean"),
list("aidscapita", 1990:1991, "mean"),
list("black", 1990:1992, "mean"),
list("perc1519", 1990, "mean")),
dependent = "bmprison",
unit.variable = "statefip",
unit.names.variable = "state",
time.variable = "year",
treatment.identifier = 48,
controls.identifier = c(1,2,4:6,8:13,15:42,44:47,49:51,53:56),
time.optimize.ssr = 1985:1993,
time.plot = 1985:2000
)
# install packages
install.packages("Synth", repos = "http://cran.us.r-project.org")
install.packages("Synth", repos = "http://cran.us.r-project.org")
install.packages("gsynth", repos = "http://cran.us.r-project.org")
library("Synth")
library ("gsynth")
set.seed(1)
year <- rep(1:30, 10)
state <- rep(LETTERS[1:10], each = 30)
X1 <- round(rnorm(300, mean = 2, sd = 1), 2)
X2 <- round(rbinom(300, 1, 0.5) + rnorm(300), 2)
Y <- round(1 + 2*X1 + rnorm(300), 2)
df <- as.data.frame(cbind(Y, X1, X2, state, year))
df$Y <- as.numeric(as.character(df$Y))
df$X1 <- as.numeric(as.character(df$X1))
df$X2 <- as.numeric(as.character(df$X2))
df$year <- as.numeric(as.character(df$year))
df$state.num <- as.numeric(df$state)
df$state <- as.character(df$state)
df$T <- ifelse(df$state == "A" & df$year >= 15, 1, 0)
df$Y <- ifelse(df$state == "A" & df$year >= 15, df$Y + 20, df$Y)
str(df)
str(df)
# run synth
synth.out <- synth(dataprep.out)
dataprep.out <-
dataprep(df,
predictors = c("X1", "X2"),
dependent     = "Y",
unit.variable = "state.num",
time.variable = "year",
unit.names.variable = "state",
treatment.identifier  = 1,
controls.identifier   = c(2:10),
time.predictors.prior = c(1:14),
time.optimize.ssr     = c(1:14),
time.plot             = c(1:30)
)
head(df)
# x1, in agrocortex, would be something like percentage of forest cover. y would be amount of deforestation?
dataprep.out <-
dataprep(df,
predictors = c("X1", "X2"),
dependent     = "Y",
unit.variable = "state.num",
time.variable = "year",
unit.names.variable = "state",
treatment.identifier  = 1,
controls.identifier   = c(2:10),
time.predictors.prior = c(1:14),
time.optimize.ssr     = c(1:14),
time.plot             = c(1:30)
)
print(synth.tables   <- synth.tab(
dataprep.res = dataprep.out,
synth.res    = synth.out)
)
# run synth
synth.out <- synth(dataprep.out)
# now we estimate the models
# x1, in agrocortex, would be something like percentage of forest cover. y would be amount of deforestation?
dataprep.out <-
dataprep(df,
predictors = c("X1", "X2"),
dependent     = "Y",
unit.variable = "state.num",
time.variable = "year",
unit.names.variable = "state",
treatment.identifier  = 1,
controls.identifier   = c(2:10),
time.predictors.prior = c(1:14),
time.optimize.ssr     = c(1:14),
time.plot             = c(1:30)
)
df$T <- ifelse(df$state == "A" & df$year >= 15, 1, 0)
df$Y <- ifelse(df$state == "A" & df$year >= 15, df$Y + 20, df$Y)
dataprep.out <-
dataprep(df,
predictors = c("X1", "X2"),
dependent     = "Y",
unit.variable = "state.num",
time.variable = "year",
unit.names.variable = "state",
treatment.identifier  = 1,
controls.identifier   = c(2:10),
time.predictors.prior = c(1:14),
time.optimize.ssr     = c(1:14),
time.plot             = c(1:30)
)
# now we estimate the models
# x1, in agrocortex, would be something like percentage of forest cover. y would be amount of deforestation?
dataprep.out <-
dataprep(df,
predictors = c("X1", "X2"),
dependent     = "Y",
unit.variable = "state.num",
time.variable = "year",
unit.names.variable = "state",
treatment.identifier  = 1,
controls.identifier   = c(2:10),
time.predictors.prior = c(1:14),
time.optimize.ssr     = c(1:14),
time.plot             = c(1:30)
)
source("G:/.shortcut-targets-by-id/1rdr5l5G0qIwemvG4qzNBH4KvxTHwoEBJ/REDD_specification_curve/code/agrocortex/rachel mock synthetic control 2.R", echo=TRUE)
install.packages("Synth", repos = "http://cran.us.r-project.org")
install.packages("gsynth", repos = "http://cran.us.r-project.org")
dataprep.out <-
dataprep(df,
predictors = c("X1", "X2"),
dependent     = "Y",
unit.variable = "state.num",
time.variable = "year",
unit.names.variable = "state",
treatment.identifier  = 1,
controls.identifier   = c(2:10),
time.predictors.prior = c(1:14),
time.optimize.ssr     = c(1:14),
time.plot             = c(1:30)
)
# simulating data
set.seed(1)
year <- rep(1:30, 10)
state <- rep(LETTERS[1:10], each = 30)
# here you can think of X1, X2, as two randomly generated state-related variables, like population and percentage of whites
X1 <- round(rnorm(300, mean = 2, sd = 1), 2)
X2 <- round(rbinom(300, 1, 0.5) + rnorm(300), 2)
# y is the the dependent variable
Y <- round(1 + 2*X1 + rnorm(300), 2)
# combines all above data into one data frame
df <- as.data.frame(cbind(Y, X1, X2, state, year))
# converts specific columns to their approriate data types
df$Y <- as.numeric(as.character(df$Y))
df$X1 <- as.numeric(as.character(df$X1))
df$X2 <- as.numeric(as.character(df$X2))
df$year <- as.numeric(as.character(df$year))
df$state.num <- as.numeric(df$state)
df$state <- as.character(df$state)
# more data organization
df$T <- ifelse(df$state == "A" & df$year >= 15, 1, 0)
df$Y <- ifelse(df$state == "A" & df$year >= 15, df$Y + 20, df$Y)
library(tidyverse)
library(zoo)
library(tidyquant)
forest_2000 <- read_csv("data/raw/florestal_santa_maria/forest_2000_floresta_buffers.csv") %>%
select(-c(".geo")) %>%
rename(treecover_2000 = "sum") %>%
mutate(treated = ifelse(str_sub(`system:index`, start = 1, end = 1) == "2", 1, 0))
setwd("G:/.shortcut-targets-by-id/1rdr5l5G0qIwemvG4qzNBH4KvxTHwoEBJ/REDD_specification_curve/code/florestal santa maria")
forest_2000 <- read_csv("data/raw/florestal_santa_maria/forest_2000_floresta_buffers.csv") %>%
select(-c(".geo")) %>%
rename(treecover_2000 = "sum") %>%
mutate(treated = ifelse(str_sub(`system:index`, start = 1, end = 1) == "2", 1, 0))
source("G:/.shortcut-targets-by-id/1rdr5l5G0qIwemvG4qzNBH4KvxTHwoEBJ/REDD_specification_curve/code/florestal santa maria/read_synth_data.R", echo=TRUE)
setwd("G:/.shortcut-targets-by-id/1rdr5l5G0qIwemvG4qzNBH4KvxTHwoEBJ/REDD_specification_curve/code/florestal santa maria")
forest_2000 <- read_csv("data/raw/florestal_santa_maria/forest_2000_floresta_buffers.csv") %>%
select(-c(".geo")) %>%
rename(treecover_2000 = "sum") %>%
mutate(treated = ifelse(str_sub(`system:index`, start = 1, end = 1) == "2", 1, 0))
source("G:/.shortcut-targets-by-id/1rdr5l5G0qIwemvG4qzNBH4KvxTHwoEBJ/REDD_specification_curve/code/florestal santa maria/florestal santa maria synthetic controls.R", echo=TRUE)
library(Synth)
library(tidyverse)
library(zoo)
library(tidyquant)
# treatment variable is called "treated"
# time variable is year
# outcome variable is loss
dataprep.out <-
dataprep(dat_long,
predictors = "accessibility",
dependent     = "loss",
unit.variable = "ID",
time.variable = "year",
# unit.names.variable = "system:index",
treatment.identifier  = 101,
controls.identifier   = c(1:100),
time.predictors.prior = c(1:10),
time.optimize.ssr     = c(1:10),
time.plot             = c(1:22)
)
# I assume this is the dataframe we use
load("data/processed/florestal_santa_maria/dat_synth.Rdata")
# look at the data
head(dat_long)
library(Synth)
library(tidyverse)
library(zoo)
library(tidyquant)
# I assume this is the dataframe we use
load("data/processed/florestal_santa_maria/dat_synth.Rdata")
